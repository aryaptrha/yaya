let supabaseUrl="https://nrgxggpmipbvecjshvxf.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5yZ3hnZ3BtaXBidmVjanNodnhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDExNDUxMjksImV4cCI6MjA1NjcyMTEyOX0.rJeqNwDJ794OUIxR0Zlr0ZNvx0rysTeEPfc5OmcUGqM",supabase=window.supabase.createClient(supabaseUrl,supabaseKey);async function checkVisitorSession(){var e=sessionStorage.getItem("visitorName");return e||null}async function saveVisitorInfo(e,t){try{var i;if("magic word"===e.toLowerCase())(i=document.getElementById("visitor-modal"))&&i.parentNode&&i.parentNode.removeChild(i),window.location.href="../pages/admin.html";else{var s=(await supabase.from("visitors").insert([{name:e,page_visited:t,visit_time:(new Date).toISOString()}])).error;if(s)return console.error("Error saving visitor:",s),!1;sessionStorage.setItem("visitorName",e);var o=document.getElementById("visitor-modal");o&&o.parentNode&&o.parentNode.removeChild(o)}return!0}catch(e){return console.error("Error in saveVisitorInfo:",e),!1}}function showVisitorModal(i){var e=sessionStorage.getItem("visitorName");e?console.log(`Welcome back, ${e}!`):((e=document.getElementById("visitor-modal"))&&e.parentNode&&e.parentNode.removeChild(e),(e=document.createElement("div")).innerHTML=`
    <div id="visitor-modal">
      <div class="visitor-modal-content">
        <h2>Welcome!</h2>
        <p>Please enter your name to continue:</p>
        <input type="text" id="visitor-name" placeholder="Your name" class="visitor-input">
        <div class="visitor-button-container">
          <button id="visitor-submit" class="visitor-button">Continue</button>
        </div>
      </div>
    </div>
  `,document.body.appendChild(e.firstElementChild),document.getElementById("visitor-submit").addEventListener("click",async function(){let e=document.getElementById("visitor-name");var t=e.value.trim();t?await saveVisitorInfo(t,i):(e.classList.add("error"),setTimeout(()=>e.classList.remove("error"),500))}),document.getElementById("visitor-name").addEventListener("keypress",async function(e){"Enter"===e.key&&((e=this.value.trim())?await saveVisitorInfo(e,i):(this.classList.add("error"),setTimeout(()=>this.classList.remove("error"),500)))}))}